# å¾®ä¿¡è¯»ä¹¦ Web é˜…è¯»åº”ç”¨

<div align="center">

[![Deploy](https://github.com/h7ml/weread/actions/workflows/deploy.yml/badge.svg)](https://github.com/h7ml/weread/actions/workflows/deploy.yml)
[![Live Demo](https://img.shields.io/badge/Live%20Demo-webook.linuxcloudlab.com-blue?style=flat&logo=vercel)](https://webook.linuxcloudlab.com/)
[![Deno Version](https://img.shields.io/badge/Deno-1.40+-black?style=flat&logo=deno)](https://deno.land/)
[![Fresh Version](https://img.shields.io/badge/Fresh-1.7.3-green?style=flat&logo=deno)](https://fresh.deno.dev/)
[![License](https://img.shields.io/badge/License-MIT-yellow?style=flat)](LICENSE)

[![TypeScript](https://img.shields.io/badge/TypeScript-Ready-blue?style=flat&logo=typescript)](https://www.typescriptlang.org/)
[![TailwindCSS](https://img.shields.io/badge/TailwindCSS-3.4.0-06B6D4?style=flat&logo=tailwindcss)](https://tailwindcss.com/)
[![Preact](https://img.shields.io/badge/Preact-10.22.0-673AB8?style=flat&logo=preact)](https://preactjs.com/)
[![Code Style](https://img.shields.io/badge/Code%20Style-Deno%20fmt-black?style=flat&logo=deno)](https://deno.land/manual/tools/formatter)

[![GitHub Stars](https://img.shields.io/github/stars/h7ml/weread?style=social)](https://github.com/h7ml/weread/stargazers)
[![GitHub Forks](https://img.shields.io/github/forks/h7ml/weread?style=social)](https://github.com/h7ml/weread/network/members)
[![GitHub Issues](https://img.shields.io/github/issues/h7ml/weread?style=flat&logo=github)](https://github.com/h7ml/weread/issues)
[![GitHub Last Commit](https://img.shields.io/github/last-commit/h7ml/weread?style=flat&logo=github)](https://github.com/h7ml/weread/commits)

</div>

---

åŸºäº Fresh (Deno) æ„å»ºçš„ç°ä»£åŒ–å¾®ä¿¡è¯»ä¹¦ Web é˜…è¯»åº”ç”¨ï¼Œå…·æœ‰é«˜çº§ TTS
åŠŸèƒ½å’Œä¼˜é›…çš„é˜…è¯»ç•Œé¢ã€‚

## ğŸš€ ç‰¹æ€§

### ğŸ“š é˜…è¯»ä½“éªŒ

- **å®Œæ•´çš„ç”µå­ä¹¦é˜…è¯»å™¨**ï¼šæ”¯æŒç« èŠ‚å¯¼èˆªã€é˜…è¯»è¿›åº¦è·Ÿè¸ª
- **å¤šç§é˜…è¯»ä¸»é¢˜**ï¼šæŠ¤çœ¼æ¨¡å¼ã€å¤œé—´æ¨¡å¼ç­‰
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯

### ğŸ”Š é«˜çº§ TTS ç³»ç»Ÿ

- **åŒå¼•æ“æ”¯æŒ**ï¼šå¤–éƒ¨äº‘ TTS + æµè§ˆå™¨ Web Speech API å›é€€
- **29+ ä¸­æ–‡è¯­éŸ³**ï¼šæ”¯æŒå¤šç§éŸ³è‰²å’Œæƒ…æ„Ÿé£æ ¼
- **æ™ºèƒ½åŠŸèƒ½**ï¼š
  - å¥å­çº§é˜…è¯»å’Œå¯è§†åŒ–é«˜äº®
  - å®æ—¶è¿›åº¦è·Ÿè¸ªå’ŒåŠ¨ç”»è¿›åº¦æ¡
  - è‡ªåŠ¨æ»šåŠ¨ï¼Œå¯é…ç½®é€Ÿåº¦å’Œå¹³æ»‘åº¦
  - è·¨ç« èŠ‚è¿ç»­é˜…è¯»

### ğŸ” å¾®ä¿¡è¯»ä¹¦é›†æˆ

- **å®Œæ•´ API é›†æˆ**ï¼šæ”¯æŒå…¬å¼€å’Œè®¤è¯æ¨¡å¼
- **å†…å®¹è§£å¯†**ï¼šå¤„ç†å—ä¿æŠ¤çš„ç« èŠ‚å†…å®¹
- **ä¼šè¯ç®¡ç†**ï¼šåŸºäº Cookie çš„è®¤è¯å’Œ KV å­˜å‚¨

### ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**ï¼šFresh 2.0 (Deno å…¨æ ˆæ¡†æ¶)
- **å‰ç«¯**ï¼šPreact + Signals çŠ¶æ€ç®¡ç†
- **æ ·å¼**ï¼šTailwindCSS 4.x + PostCSS
- **åç«¯**ï¼šDeno + KV å­˜å‚¨ + å®šæ—¶ä»»åŠ¡
- **TTS**ï¼šå¤–éƒ¨æœåŠ¡é›†æˆ + æµè§ˆå™¨å›é€€

## ğŸ“¦ å®‰è£…å’Œä½¿ç”¨

### ç¯å¢ƒè¦æ±‚

- [Deno](https://docs.deno.com/runtime/getting_started/installation) æœ€æ–°ç‰ˆæœ¬

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰
deno task dev
```

æœåŠ¡å°†åœ¨ http://localhost:8001 å¯åŠ¨ï¼ˆæˆ– PORT ç¯å¢ƒå˜é‡æŒ‡å®šçš„ç«¯å£ï¼‰

### ä»£ç è´¨é‡æ£€æŸ¥

```bash
# æ ¼å¼æ£€æŸ¥ + Lint æ£€æŸ¥ï¼ˆæ¨èæ—¥å¸¸ä½¿ç”¨ï¼‰
deno task check

# ä»…ç±»å‹æ£€æŸ¥
deno task check-types  

# å®Œæ•´æ£€æŸ¥ï¼ˆæ ¼å¼ + Lint + ç±»å‹ï¼‰
deno task check-all

# æ ¼å¼åŒ–ä»£ç 
deno fmt

# ä»… Lint æ£€æŸ¥
deno lint
```

### ç”Ÿäº§éƒ¨ç½²

```bash
# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
deno task build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
deno task start
```

### æ›´æ–°æ¡†æ¶

```bash
# æ›´æ–° Fresh æ¡†æ¶
deno task update
```

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
weread/
â”œâ”€â”€ routes/                 # Fresh åŸºäºæ–‡ä»¶çš„è·¯ç”±
â”‚   â”œâ”€â”€ api/               # API ç«¯ç‚¹
â”‚   â”‚   â”œâ”€â”€ book/          # ä¹¦ç±ç›¸å…³ API
â”‚   â”‚   â”œâ”€â”€ tts/           # TTS ç›¸å…³ API
â”‚   â”‚   â””â”€â”€ login/         # ç™»å½•ç›¸å…³ API
â”‚   â””â”€â”€ reader/            # é˜…è¯»å™¨é¡µé¢
â”œâ”€â”€ islands/               # å®¢æˆ·ç«¯äº¤äº’ç»„ä»¶ï¼ˆæ°´åˆï¼‰
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ apis/              # ä¸šåŠ¡é€»è¾‘å’Œå¤–éƒ¨ API é›†æˆ
â”‚   â”‚   â””â”€â”€ web/           # å¾®ä¿¡è¯»ä¹¦ API å°è£…
â”‚   â”œâ”€â”€ kv/                # Deno KV æ•°æ®æ“ä½œ
â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°å’ŒåŠ©æ‰‹
â”‚   â””â”€â”€ types/             # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ static/                # é™æ€èµ„æº
â””â”€â”€ components/            # å¯å¤ç”¨ç»„ä»¶
```

## ğŸ”§ é…ç½®

### ç¯å¢ƒå˜é‡

```bash
PORT=8888                  # æœåŠ¡ç«¯å£ï¼ˆé»˜è®¤ï¼š8888ï¼‰
DENO_ENV=production        # ç¯å¢ƒï¼ˆlocal/development/productionï¼‰
KV_NAMESPACE=weread        # Deno KV å‘½åç©ºé—´
LOG_LEVEL=info             # æ—¥å¿—çº§åˆ«
```

### è·¯å¾„åˆ«å

é¡¹ç›®é…ç½®äº†ä»¥ä¸‹è·¯å¾„åˆ«åï¼š

- `@/utils` â†’ `src/utils/mod.ts`
- `@/apis` â†’ `src/apis/mod.ts`
- `@/kv` â†’ `src/kv/mod.ts`
- `@/config` â†’ `src/config.ts`
- `@/types` â†’ `src/types/mod.ts`

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

### TTS API ç«¯ç‚¹

- `GET /api/tts` - æ–‡æœ¬è½¬è¯­éŸ³ï¼ˆæ”¯æŒ leftsite å’Œ openxing å¼•æ“ï¼‰
- `GET /api/tts/voices` - è·å–å¯ç”¨è¯­éŸ³åˆ—è¡¨
- `POST /api/tts/openxing` - OpenXing TTS ä¸“ç”¨ç«¯ç‚¹

### ä¹¦ç± API ç«¯ç‚¹

- `GET /api/book/info` - è·å–ä¹¦ç±ä¿¡æ¯
- `GET /api/book/chapters` - è·å–ç« èŠ‚åˆ—è¡¨
- `GET /api/book/content` - è·å–ç« èŠ‚å†…å®¹

### é˜…è¯»å™¨ç»„ä»¶

- `WeReadStyleReaderComponent` - ä¸»è¦çš„é˜…è¯»å™¨ç•Œé¢
- `LoginComponent` - å¾®ä¿¡è¯»ä¹¦ç™»å½•ç»„ä»¶
- `HomeComponent` - ä¸»é¡µå’Œä¹¦ç±æµè§ˆ

## ğŸ›¡ï¸ å®‰å…¨ç‰¹æ€§

- **å†…å®¹è§£å¯†**ï¼šå¤„ç†å¾®ä¿¡è¯»ä¹¦çš„å†…å®¹ä¿æŠ¤
- **è¯·æ±‚ç­¾å**ï¼šå¤æ‚çš„ç­¾åç³»ç»Ÿç¡®ä¿ API å®‰å…¨
- **ä¼šè¯ç®¡ç†**ï¼šå®‰å…¨çš„ç”¨æˆ·è®¤è¯å’ŒçŠ¶æ€ç®¡ç†

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. **ä»£ç è´¨é‡**ï¼šä½¿ç”¨ `deno task check` ç¡®ä¿ä»£ç æ ¼å¼å’Œ Lint è§„èŒƒ
2. **KV ä½¿ç”¨**ï¼šé€šè¿‡ `@/kv` æ¨¡å—è¿›è¡Œæ•°æ®æŒä¹…åŒ–
3. **TTS å¼€å‘**ï¼šæµ‹è¯•å¤–éƒ¨ TTS æœåŠ¡å¯ç”¨æ€§
4. **Fresh Islands**ï¼šäº¤äº’ç»„ä»¶æ”¾åœ¨ `islands/` ç›®å½•å¹¶è‡ªåŠ¨æ°´åˆ

## ğŸ“Š é¡¹ç›®çŠ¶æ€

- âœ… **æ ¼å¼æ£€æŸ¥**ï¼šå®Œå…¨é€šè¿‡
- âœ… **Lint æ£€æŸ¥**ï¼šå®Œå…¨é€šè¿‡
- âš ï¸ **ç±»å‹æ£€æŸ¥**ï¼šæŒç»­ä¼˜åŒ–ä¸­ï¼ˆFresh 2.0 å…¼å®¹æ€§ï¼‰

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›é¡¹ç›®ï¼

## ğŸ“„ è®¸å¯è¯

MIT License
